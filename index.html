<!DOCTYPE html>
<html>
  <style>
    table tr td{
      border: 1px black solid;
    }
  </style>
  <body>
    <p>Related Games</p>
    <table id="myTable">

    </table>
<script>

  const urlSearchParams = new URLSearchParams(window.location.search);
  const params = Object.fromEntries(urlSearchParams.entries());
  console.log(params)
  fetch("/.netlify/functions/server",
  {method: 'POST',
  headers: {
      'Accept': 'application/json',
      'Content-Type': 'application/json'
    },
  body: JSON.stringify({id: params.steamId})})
  .then(response => response.json())
  .then(function (data) {
    console.log('Request succeeded with JSON response', data);
    data.forEach(x => {
      var table = document.getElementById("myTable");
      var row = table.insertRow();
      var cell1 = row.insertCell();
      var cell2 = row.insertCell();

      cell1.innerHTML = x.name;
      cell2.innerHTML = x.id;

    })

  })
  .catch(function (error) {
    console.log('Request failed', error);
  });
</script>
</body>
</html>